<!DOCTYPE html>
<html lang="it">
<head>

  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Iscritti Settimana</title>

  <link rel="stylesheet" href="css/header.css">
  <link rel="stylesheet" href="css/iscritti.css">

  <!-- Firebase -->
  <script src="https://www.gstatic.com/firebasejs/10.12.2/firebase-app-compat.js"></script>
  <script src="https://www.gstatic.com/firebasejs/10.12.2/firebase-firestore-compat.js"></script>
  <script src="js/firebase-config.js"></script>
  



  <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.5.0/css/all.min.css">
</head>
<script src="https://cdnjs.cloudflare.com/ajax/libs/jspdf/2.5.1/jspdf.umd.min.js"></script>
<body>

<div id="header"></div>

<div class="page-container">

  <h1 id="titoloSettimana">Iscritti</h1>

  <button class="btn-aggiungi" onclick="apriPopupAggiungi()">
    <i class="fa-solid fa-plus"></i> Aggiungi Iscrizione
  </button>

  <div class="tabella-container">
    <table>
      <thead>
        <tr>
          <th>Cognome Nome</th>
          <th>Cert.</th>
          <th>Tessera</th>
          <th>Foto CF</th>
          <th>Documento</th>
          <th>Stato</th>
          <th>Azione</th>
        </tr>
      </thead>
      <tbody id="listaIscritti"></tbody>
    </table>
  </div>

</div>

<!-- üî• POPUP PAGAMENTO (ORA DENTRO BODY) -->
<div id="popupPagamento" class="popup-hidden">
  <div class="popup-box">
    <h3>Pagamento Atleta</h3>

    <p>Totale dovuto: <strong id="totaleDovuto">0</strong> ‚Ç¨</p>
    <p id="rigaScontoIscrizione" style="display:none;">
  Sconto iscrizione: <strong id="scontoIscrizione">0</strong> ‚Ç¨
</p>
    <p>Totale pagato: <strong id="totalePagato">0</strong> ‚Ç¨</p>
    <p>Residuo: <strong id="residuoPagamento">0</strong> ‚Ç¨</p>


<p>
  Sconto:
  <input type="number" id="scontoPagamento" value="0" style="width:80px;"> ‚Ç¨
</p>
    <input type="number" id="importoPagamento" placeholder="Importo da registrare">

    <select id="metodoPagamento">
      <option value="">Metodo</option>
      <option value="Contanti">Contanti</option>
      <option value="Bonifico">Bonifico</option>
      <option value="Carta">Carta</option>
    </select>

    <button onclick="registraPagamento()">Registra</button>
    <button onclick="chiudiPopupPagamento()">Annulla</button>

    <button id="btnStampaRicevuta"
        onclick="stampaRicevuta()"
        style="display:none;">
  üñ®Ô∏è Stampa Ricevuta
</button>
  </div>
</div>

<script src="js/iscritti.js"></script>

<script>
function goDashboard() {
  window.location.href = "dashboard.html";
}
function goBack() {
  window.history.back();
}
</script>
<div id="popupAggiungi" class="popup-hidden">
  <div class="popup-box">

    <span onclick="chiudiPopupAggiungi()"
          style="position:absolute;top:15px;right:18px;cursor:pointer;font-size:18px;font-weight:bold;">
      ‚úñ
    </span>

    <h3>Aggiungi Iscrizione</h3>

    <input type="text"
           id="ricercaCognome"
           placeholder="Scrivi cognome..."
           oninput="cercaAtleta()">

    <div id="risultatiRicerca" class="lista-risultati"></div>

  </div>
</div>
</body>
</html>